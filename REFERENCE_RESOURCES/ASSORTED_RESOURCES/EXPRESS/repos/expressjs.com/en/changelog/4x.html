<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Express 4.x changelog</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Express 4.x changelog</h1>
    </header>
    <h1 id="release-change-log">Release Change Log</h1>
    <h2 id="release-date-2019-05-25">4.17.1 - Release date: 2019-05-25</h2>
    <p>{: id=“4.17.1”}</p>
    <p>The 4.17.1 patch release includes one bug fix:</p>
    <ul>
      <li class="changelog-item">
        The change to the <code>res.status()</code> API has been reverted due to
        causing regressions in existing Express 4 applications.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4171--2019-05-25"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2019-05-16">4.17.0 - Release date: 2019-05-16</h2>
    <p>{: id=“4.17.0”}</p>
    <p>
      The 4.17.0 minor release includes bug fixes and some new features,
      including:
    </p>
    <ul>
      <li class="changelog-item">
        The <code>express.raw()</code> and
        <code>express.text()</code> middleware have been added to provide
        request body parsing for more raw request payloads. This uses the
        <a href="https://www.npmjs.com/package/body-parser"
          >expressjs/body-parser module</a
        >
        module underneath, so apps that are currently requiring the module
        separately can switch to the built-in parsers.
      </li>
      <li class="changelog-item">
        The <code>res.cookie()</code> API now supports the
        <code>"none"</code> value for the <code>sameSite</code> option.
      </li>
      <li class="changelog-item">
        When the <code>"trust proxy"</code> setting is enabled, the
        <code>req.hostname</code> now supports multiple
        <code>X-Forwarded-For</code> headers in a request.
      </li>
      <li class="changelog-item">
        Starting with this version, Express supports Node.js 10.x and 12.x.
      </li>
      <li class="changelog-item">
        The <code>res.sendFile()</code> API now provides and more immediate and
        easier to understand error when a non-string is passed as the
        <code>path</code> argument.
      </li>
      <li class="changelog-item">
        The <code>res.status()</code> API now provides and more immediate and
        easier to understand error when <code>null</code> or
        <code>undefined</code> is passed as the argument.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4170--2019-05-16"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2018-10-10">4.16.4 - Release date: 2018-10-10</h2>
    <p>{: id=“4.16.4”}</p>
    <p>The 4.16.4 patch release includes various bug fixes:</p>
    <ul>
      <li class="changelog-item">
        Fix issue where <code>"Request aborted"</code> may be logged in
        <code>res.sendfile</code>.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4164--2018-10-10"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2018-03-12">4.16.3 - Release date: 2018-03-12</h2>
    <p>{: id=“4.16.3”}</p>
    <p>The 4.16.3 patch release includes various bug fixes:</p>
    <ul>
      <li class="changelog-item">
        Fix issue where a plain <code>%</code> at the end of the url in the
        <code>res.location</code> method or the <code>res.redirect</code> method
        would not get encoded as <code>%25</code>.
      </li>
      <li class="changelog-item">
        Fix issue where a blank <code>req.url</code> value can result in a
        thrown error within the default 404 handling.
      </li>
      <li class="changelog-item">
        Fix the generated HTML document for <code>express.static</code> redirect
        responses to properly include <code>&lt;/html&gt;</code>.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4163--2018-03-12"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-10-09">4.16.2 - Release date: 2017-10-09</h2>
    <p>{: id=“4.16.2”}</p>
    <p>The 4.16.2 patch release includes a regression bug fix:</p>
    <ul>
      <li class="changelog-item">
        Fix a <code>TypeError</code> that can occur in the
        <code>res.send</code> method when a <code>Buffer</code> is passed to
        <code>res.send</code> and the <code>ETag</code> header is already set on
        the response.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4162--2017-10-09"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-09-29">4.16.1 - Release date: 2017-09-29</h2>
    <p>{: id=“4.16.1”}</p>
    <p>The 4.16.1 patch release includes a regression bug fix:</p>
    <ul>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/send">pillarjs/send module</a> to
        fix an edge case scenario regression that affected certain users of
        <code>express.static</code>.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4161--2017-09-29"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-09-28">4.16.0 - Release date: 2017-09-28</h2>
    <p>{: id=“4.16.0”}</p>
    <p>
      The 4.16.0 minor release includes security updates, bug fixes, performance
      enhancements, and some new features, including:
    </p>
    <ul>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/forwarded"
          >jshttp/forwarded module</a
        >
        to address a
        <a href="https://npmjs.com/advisories/527">vulnerability</a>. This may
        affect your application if the following APIs are used:
        <code>req.host</code>, <code>req.hostname</code>, <code>req.ip</code>,
        <code>req.ips</code>, <code>req.protocol</code>.
      </li>
      <li class="changelog-item">
        Update a dependency of the
        <a href="https://www.npmjs.com/package/send">pillarjs/send module</a> to
        address a
        <a href="https://npmjs.com/advisories/535">vulnerability</a> in the
        <code>mime</code> dependency. This may affect your application if
        untrusted string input is passed to the following APIs:
        <code>res.type()</code>.
      </li>
      <li class="changelog-item">
        The
        <a href="https://www.npmjs.com/package/send">pillarjs/send module</a>
        has implemented a protection against the Node.js 8.5.0
        <a
          href="https://nodejs.org/en/blog/vulnerability/september-2017-path-validation/"
          >vulnerability</a
        >. Using any prior version of Express.js with Node.js 8.5.0 (that
        specific Node.js version) will make the following APIs vulnerable:
        <code>express.static</code>, <code>res.sendfile</code>, and
        <code>res.sendFile</code>.
      </li>
      <li class="changelog-item">
        Starting with this version, Express supports Node.js 8.x.
      </li>
      <li class="changelog-item">
        The new setting <code>"json escape"</code> can be enabled to escape
        characters in <code>res.json()</code>, <code>res.jsonp()</code> and
        <code>res.send()</code> responses that can trigger clients to sniff the
        response as HTML instead of honoring the <code>Content-Type</code>. This
        can help protect an Express app from a class of persistent XSS-based
        attacks.
      </li>
      <li class="changelog-item">
        The
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.download"
          ><code>res.download()</code> method</a
        >
        now accepts an optional <code>options</code> object.
      </li>
      <li class="changelog-item">
        The <code>express.json()</code> and
        <code>express.urlencoded()</code> middleware have been added to provide
        request body parsing support out-of-the-box. This uses the
        <a href="https://www.npmjs.com/package/body-parser"
          >expressjs/body-parser module</a
        >
        module underneath, so apps that are currently requiring the module
        separately can switch to the built-in parsers.
      </li>
      <li class="changelog-item">
        The
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#express.static"
          ><code>express.static()</code> middleware</a
        >
        and
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.sendFile"
          ><code>res.sendFile()</code> method</a
        >
        now support setting the <code>immutable</code> directive on the
        <code>Cache-Control</code> header. Setting this header with an
        appropriate <code>maxAge</code> will prevent supporting web browsers
        from sending any request to the server when the file is still in their
        cache.
      </li>
      <li class="changelog-item">
        The
        <a href="https://www.npmjs.com/package/send">pillarjs/send module</a>
        has an updated list of MIME types to better set the
        <code>Content-Type</code> of more files. There are 70 new types for file
        extensions.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4160--2017-09-28"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-09-24">4.15.5 - Release date: 2017-09-24</h2>
    <p>{: id=“4.15.5”}</p>
    <p>
      The 4.15.5 patch release includes security updates, some minor performance
      enhancements, and a bug fix:
    </p>
    <ul>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/debug">debug module</a> to
        address a
        <a href="https://snyk.io/vuln/npm:debug:20170905">vulnerability</a>, but
        this issue does not impact Express.
      </li>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/fresh">jshttp/fresh module</a> to
        address a <a href="https://npmjs.com/advisories/526">vulnerability</a>.
        This will affect your application if the following APIs are used:
        <code>express.static</code>, <code>req.fresh</code>,
        <code>res.json</code>, <code>res.jsonp</code>, <code>res.send</code>,
        <code>res.sendfile</code> <code>res.sendFile</code>,
        <code>res.sendStatus</code>.
      </li>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/fresh">jshttp/fresh module</a>
        fixes handling of modified headers with invalid dates and makes parsing
        conditional headers (like <code>If-None-Match</code>) faster.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4155--2017-09-24"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-08-06">4.15.4 - Release date: 2017-08-06</h2>
    <p>{: id=“4.15.4”}</p>
    <p>The 4.15.4 patch release includes some minor bug fixes:</p>
    <ul>
      <li class="changelog-item">
        Fix array being set for <code>"trust proxy"</code> value being
        manipulated in certain conditions.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4154--2017-08-06"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-05-16">4.15.3 - Release date: 2017-05-16</h2>
    <p>{: id=“4.15.3”}</p>
    <p>
      The 4.15.3 patch release includes a security update and some minor bug
      fixes:
    </p>
    <ul>
      <li class="changelog-item">
        Update a dependency of the
        <a href="https://www.npmjs.com/package/send">pillarjs/send module</a> to
        address a
        <a href="https://snyk.io/vuln/npm:ms:20170412">vulnerability</a>. This
        may affect your application if untrusted string input is passed to the
        <code>maxAge</code> option in the following APIs:
        <code>express.static</code>, <code>res.sendfile</code>, and
        <code>res.sendFile</code>.
      </li>
      <li class="changelog-item">
        Fix error when <code>res.set</code> cannot add charset to
        <code>Content-Type</code>.
      </li>
      <li class="changelog-item">
        Fix missing <code>&lt;/html&gt;</code> in HTML document.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4153--2017-05-16"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-03-06">4.15.2 - Release date: 2017-03-06</h2>
    <p>{: id=“4.15.2”}</p>
    <p>The 4.15.2 patch release includes a minor bug fix:</p>
    <ul>
      <li class="changelog-item">
        Fix regression parsing keys starting with <code>[</code> in the extended
        (default) query parser.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4152--2017-03-06"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-03-05">4.15.1 - Release date: 2017-03-05</h2>
    <p>{: id=“4.15.1”}</p>
    <p>The 4.15.1 patch release includes a minor bug fix:</p>
    <ul>
      <li class="changelog-item">
        Fix compatibility issue when using the datejs 1.x library where the
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#express.static"
          ><code>express.static()</code> middleware</a
        >
        and
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.sendFile"
          ><code>res.sendFile()</code> method</a
        >
        would incorrectly respond with 412 Precondition Failed.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4151--2017-03-05"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-03-01">4.15.0 - Release date: 2017-03-01</h2>
    <p>{: id=“4.15.0”}</p>
    <p>
      The 4.15.0 minor release includes bug fixes, performance improvements, and
      other minor feature additions, including:
    </p>
    <ul>
      <li class="changelog-item">
        Starting with this version, Express supports Node.js 7.x.
      </li>
      <li class="changelog-item">
        The
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#express.static"
          ><code>express.static()</code> middleware</a
        >
        and
        <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.sendFile"
          ><code>res.sendFile()</code> method</a
        >
        now support the <code>If-Match</code> and
        <code>If-Unmodified-Since</code> request headers.
      </li>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/etag">jshttp/etag module</a> to
        generate the default ETags for responses which work when Node.js has
        <a
          href="https://nodejs.org/dist/latest/docs/api/cli.html#cli_enable_fips"
          >FIPS-compliant crypto enabled</a
        >.
      </li>
      <li class="changelog-item">
        Various auto-generated HTML responses like the default not found and
        error handlers will respond with complete HTML 5 documents and
        additional security headers.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4150--2017-03-01"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2017-01-28">4.14.1 - Release date: 2017-01-28</h2>
    <p>{: id=“4.14.1”}</p>
    <p>
      The 4.14.1 patch release includes bug fixes and performance improvements,
      including:
    </p>
    <ul>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/finalhandler"
          >pillarjs/finalhandler module</a
        >
        fixes an exception when Express handles an <code>Error</code> object
        which has a <code>headers</code> property that is not an object.
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4141--2017-01-28"
        >History.md</a
      >.
    </p>
    <h2 id="release-date-2016-06-16">4.14.0 - Release date: 2016-06-16</h2>
    <p>{: id=“4.14.0”}</p>
    <p>
      The 4.14.0 minor release includes bug fixes, security update, performance
      improvements, and other minor feature additions, including:
    </p>
    <ul>
      <li class="changelog-item">
        Starting with this version, Express supports Node.js 6.x.
      </li>
      <li class="changelog-item">
        Update to
        <a href="https://www.npmjs.com/package/negotiator"
          >jshttp/negotiator module</a
        >
        fixes a
        <a href="https://npmjs.com/advisories/106"
          >regular expression denial of service vulnerability</a
        >.
      </li>
      <li markdown="1" class="changelog-item">
        <p>
          The
          <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.sendFile"
            ><code>res.sendFile()</code> method</a
          >
          now accepts two new options: <code>acceptRanges</code> and
          <code>cacheControl</code>.
        </p>
        <ul>
          <li>
            <p>
              <code>acceptRanges</code> (defaut is <code>true</code>), enables
              or disables accepting ranged requests. When disabled, the response
              does not send the <code>Accept-Ranges</code> header and ignores
              the contents of the <code>Range</code> request header.
            </p>
            <ul>
              <li>
                <p>
                  <code>cacheControl</code>, (default is <code>true</code>),
                  enables or disables the <code>Cache-Control</code> response
                  header. Disabling it will ignore the
                  <code>maxAge</code> option.
                </p>
              </li>
              <li>
                <code>res.sendFile</code> has also been updated to handle
                <code>Range</code> header and redirections better.
              </li>
            </ul>
          </li>
          <li class="changelog-item">
            The
            <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.location"
              ><code>res.location()</code> method</a
            >
            and
            <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.redirect"
              ><code>res.redirect()</code> method</a
            >
            will now URL-encode the URL string, if it is not already encoded.
          </li>
          <li class="changelog-item">
            The performance of the
            <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.json"
              ><code>res.json()</code> method</a
            >
            and
            <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.jsonp"
              ><code>res.jsonp()</code> method</a
            >
            have been improved in the common cases.
          </li>
          <li class="changelog-item">
            <p>
              The
              <a href="https://www.npmjs.com/package/cookie"
                >jshttp/cookie module</a
              >
              (in addition to a number of other improvements) has been updated
              and now the
              <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#res.cookie"
                ><code>res.cookie()</code> method</a
              >
              supports the <code>sameSite</code> option to let you specify the
              <a
                href="https://tools.ietf.org/html/draft-west-first-party-cookies-07"
                >SameSite cookie attribute</a
              >. NOTE: This attribute has not yet been fully standardized, may
              change in the future, and many clients may ignore it.
            </p>
            <p>The possible value for the <code>sameSite</code> option are:</p>
            <ul>
              <li>
                <code>true</code>, which sets the
                <code>SameSite</code> attribute to <code>Strict</code> for
                strict same site enforcement.
              </li>
              <li>
                <code>false</code>, which does not set the
                <code>SameSite</code> attribute.
              </li>
              <li>
                <code>'lax'</code>, which sets the
                <code>SameSite</code> attribute to <code>Lax</code> for lax same
                site enforcement.
              </li>
              <li>
                <code>'strict'</code>, which sets the
                <code>SameSite</code> attribute to <code>Strict</code> for
                strict same site enforcement.
              </li>
            </ul>
          </li>
          <li class="changelog-item">
            Absolute path checking on Windows, which was incorrect for some
            cases, has been fixed.
          </li>
          <li class="changelog-item">
            IP address resolution with proxies has been greatly improved.
          </li>
          <li class="changelog-item">
            The
            <a href="/%7B%7B%20page.lang%20%7D%7D/4x/api.html#req.range"
              ><code>req.range()</code> method</a
            >
            options object now supports a <code>combine</code> option (<code
              >false</code
            >
            by default), which when <code>true</code>, combines overlapping and
            adjacent ranges and returns them as if they were specified that way
            in the header.
          </li>
        </ul>
      </li>
    </ul>
    <p>
      For a complete list of changes in this release, see
      <a
        href="https://github.com/expressjs/express/blob/master/History.md#4140--2016-06-16"
        >History.md</a
      >.
    </p>
  </body>
</html>
