<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>testing</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="testing">Testing</h1>
<details open>
<summary><b>Examples</b></summary>
<ul>
<li>
<a href="https://github.com/vercel/next.js/tree/canary/examples/with-cypress">Next.js with Cypress</a>
</li>
<li>
<a href="https://github.com/vercel/next.js/tree/canary/examples/with-playwright">Next.js with Playwright</a>
</li>
<li>
<a href="https://github.com/vercel/next.js/tree/canary/examples/with-jest">Next.js with Jest and React Testing Library</a>
</li>
</ul>
</details>
<p>Learn how to set up Next.js with three commonly used testing tools: <a href="https://www.cypress.io/blog/2021/04/06/cypress-component-testing-react/">Cypress</a>, <a href="https://jestjs.io/docs/tutorial-react">Jest</a>, and <a href="https://testing-library.com/docs/react-testing-library/intro/">React Testing Library</a>.</p>
<h2 id="cypress">Cypress</h2>
<p>Cypress is a test runner used for <strong>End-to-End (E2E)</strong> and <strong>Integration Testing</strong>.</p>
<h3 id="quickstart">Quickstart</h3>
<p>You can use <code>create-next-app</code> with the <a href="https://github.com/vercel/next.js/tree/canary/examples/with-cypress">with-cypress example</a> to quickly get started.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npx</span> create-next-app@latest --example with-cypress with-cypress-app</a></code></pre></div>
<h3 id="manual-setup">Manual setup</h3>
<p>To get started with Cypress, install the <code>cypress</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">npm</span> install --save-dev cypress</a></code></pre></div>
<p>Add Cypress to the <code>package.json</code> scripts field:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb3-1" title="1"><span class="er">&quot;scripts&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">&quot;dev&quot;</span><span class="fu">:</span> <span class="st">&quot;next dev&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="dt">&quot;build&quot;</span><span class="fu">:</span> <span class="st">&quot;next build&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;next start&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="dt">&quot;cypress&quot;</span><span class="fu">:</span> <span class="st">&quot;cypress open&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="fu">}</span></a></code></pre></div>
<p>Run Cypress for the first time to generate examples that use their recommended folder structure:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="ex">npm</span> run cypress</a></code></pre></div>
<p>You can look through the generated examples and the <a href="https://docs.cypress.io/guides/getting-started/writing-your-first-test">Writing Your First Test</a> section of the Cypress Documentation to help you get familiar with Cypress.</p>
<h3 id="creating-your-first-cypress-integration-test">Creating your first Cypress integration test</h3>
<p>Assuming the following two Next.js pages:</p>
<pre class="jsx"><code>// pages/index.js
import Link from &#39;next/link&#39;

export default function Home() {
  return (
    &lt;nav&gt;
      &lt;Link href=&quot;/about&quot;&gt;
        &lt;a&gt;About&lt;/a&gt;
      &lt;/Link&gt;
    &lt;/nav&gt;
  )
}</code></pre>
<pre class="jsx"><code>// pages/about.js
export default function About() {
  return (
    &lt;div&gt;
      &lt;h1&gt;About Page&lt;/h1&gt;
    &lt;/div&gt;
  )
}</code></pre>
<p>Add a test to check your navigation is working correctly:</p>
<pre class="jsx"><code>// cypress/integration/app.spec.js

describe(&#39;Navigation&#39;, () =&gt; {
  it(&#39;should navigate to the about page&#39;, () =&gt; {
    // Start from the index page
    cy.visit(&#39;http://localhost:3000/&#39;)

    // Find a link with an href attribute containing &quot;about&quot; and click it
    cy.get(&#39;a[href*=&quot;about&quot;]&#39;).click()

    // The new url should include &quot;/about&quot;
    cy.url().should(&#39;include&#39;, &#39;/about&#39;)

    // The new page should contain an h1 with &quot;About page&quot;
    cy.get(&#39;h1&#39;).contains(&#39;About Page&#39;)
  })
})</code></pre>
<p>You can use <code>cy.visit("/")</code> instead of <code>cy.visit("http://localhost:3000/")</code> if you add <code>"baseUrl": "http://localhost:3000"</code> to the <code>cypress.json</code> configuration file.</p>
<h3 id="running-your-cypress-tests">Running your Cypress tests</h3>
<p>Since Cypress is testing a real Next.js application, it requires the Next.js server to be running prior to starting Cypress. We recommend running your tests against your production code to more closely resemble how your application will behave.</p>
<p>Run <code>npm run build</code> and <code>npm run start</code>, then run <code>npm run cypress</code> in another terminal window to start Cypress.</p>
<blockquote>
<p><strong>Note:</strong> Alternatively, you can install the <code>start-server-and-test</code> package and add it to the <code>package.json</code> scripts field: <code>"test": "start-server-and-test start http://localhost:3000 cypress"</code> to start the Next.js production server in conjuction with Cypress. Remember to rebuild your application after new changes.</p>
</blockquote>
<h3 id="getting-ready-for-continuous-integration-ci">Getting ready for Continuous Integration (CI)</h3>
<p>You will have noticed that running Cypress so far has opened an interactive browser which is not ideal for CI environments. You can also run Cypress headlessly using the <code>cypress run</code> command:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb8-1" title="1"><span class="er">//</span> <span class="er">package.json</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="er">&quot;scripts&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="er">//...</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="dt">&quot;cypress&quot;</span><span class="fu">:</span> <span class="st">&quot;cypress open&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="dt">&quot;cypress:headless&quot;</span><span class="fu">:</span> <span class="st">&quot;cypress run&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="dt">&quot;e2e&quot;</span><span class="fu">:</span> <span class="st">&quot;start-server-and-test start http://localhost:3000 cypress&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="dt">&quot;e2e:headless&quot;</span><span class="fu">:</span> <span class="st">&quot;start-server-and-test start http://localhost:3000 cypress:headless&quot;</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="fu">}</span></a></code></pre></div>
<p>You can learn more about Cypress and Continuous Integration from these resources:</p>
<ul>
<li><a href="https://docs.cypress.io/guides/continuous-integration/introduction">Cypress Continuous Integration Docs</a></li>
<li><a href="https://on.cypress.io/github-actions">Cypress GitHub Actions Guide</a></li>
<li><a href="https://github.com/cypress-io/github-action">Official Cypress Github Action</a></li>
</ul>
<h2 id="playwright">Playwright</h2>
<p>Playwright is a testing framework that lets you automate Chromium, Firefox, and WebKit with a single API. You can use it to write <strong>End-to-End (E2E)</strong> and <strong>Integration</strong> tests across all platforms.</p>
<h3 id="quickstart-1">Quickstart</h3>
<p>The fastest way to get started, is to use <code>create-next-app</code> with the <a href="https://github.com/vercel/next.js/tree/canary/examples/with-playwright">with-playwright example</a>. This will create a Next.js project complete with Playwright all set up.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="ex">npx</span> create-next-app@latest --example with-playwright with-playwright-app</a></code></pre></div>
<h3 id="manual-setup-1">Manual setup</h3>
<p>You can also use <code>npm init playwright</code> to add Playwright to an existing <code>NPM</code> project.</p>
<p>To manually get started with Playwright, install the <code>@playwright/test</code> package:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="ex">npm</span> install --save-dev @playwright/test</a></code></pre></div>
<p>Add Playwright to the <code>package.json</code> scripts field:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb11-1" title="1"><span class="er">&quot;scripts&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="dt">&quot;dev&quot;</span><span class="fu">:</span> <span class="st">&quot;next dev&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="dt">&quot;build&quot;</span><span class="fu">:</span> <span class="st">&quot;next build&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;next start&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-5" title="5">  <span class="dt">&quot;test:e2e&quot;</span><span class="fu">:</span> <span class="st">&quot;playwright test&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="fu">}</span></a></code></pre></div>
<h3 id="creating-your-first-playwright-end-to-end-test">Creating your first Playwright end-to-end test</h3>
<p>Assuming the following two Next.js pages:</p>
<pre class="jsx"><code>// pages/index.js
import Link from &#39;next/link&#39;

export default function Home() {
  return (
    &lt;nav&gt;
      &lt;Link href=&quot;/about&quot;&gt;
        &lt;a&gt;About&lt;/a&gt;
      &lt;/Link&gt;
    &lt;/nav&gt;
  )
}</code></pre>
<pre class="jsx"><code>// pages/about.js
export default function About() {
  return (
    &lt;div&gt;
      &lt;h1&gt;About Page&lt;/h1&gt;
    &lt;/div&gt;
  )
}</code></pre>
<p>Add a test to verify that your navigation is working correctly:</p>
<pre class="jsx"><code>// e2e/example.spec.ts

import { test, expect } from &#39;@playwright/test&#39;

test(&#39;should navigate to the about page&#39;, async ({ page }) =&gt; {
  // Start from the index page (the baseURL is set via the webServer in the playwright.config.ts)
  await page.goto(&#39;http://localhost:3000/&#39;)
  // Find an element with the text &#39;About Page&#39; and click on it
  await page.click(&#39;text=About Page&#39;)
  // The new url should be &quot;/about&quot; (baseURL is used there)
  await expect(page).toHaveURL(&#39;http://localhost:3000/about&#39;)
  // The new page should contain an h1 with &quot;About Page&quot;
  await expect(page.locator(&#39;h1&#39;)).toContainText(&#39;About Page&#39;)
})</code></pre>
<p>You can use <code>page.goto("/")</code> instead of <code>page.goto("http://localhost:3000/")</code>, if you add <a href="https://playwright.dev/docs/api/class-testoptions#test-options-base-url"><code>"baseURL": "http://localhost:3000"</code></a> to the <code>playwright.config.ts</code> configuration file.</p>
<h3 id="running-your-playwright-tests">Running your Playwright tests</h3>
<p>Since Playwright is testing a real Next.js application, it requires the Next.js server to be running prior to starting Playwright. It is recommend to run your tests against your production code to more closely resemble how your application will behave.</p>
<p>Run <code>npm run build</code> and <code>npm run start</code>, then run <code>npm run test:e2e</code> in another terminal window to run the Playwright tests.</p>
<blockquote>
<p><strong>Note:</strong> Alternatively, you can use the <a href="https://playwright.dev/docs/test-advanced#launching-a-development-web-server-during-the-tests"><code>webServer</code></a> feature to let Playwright start the development server and wait until it’s fully available.</p>
</blockquote>
<h3 id="running-playwright-on-continuous-integration-ci">Running Playwright on Continuous Integration (CI)</h3>
<p>Playwright will by default run your tests in the <a href="https://playwright.dev/docs/ci">headed mode</a>. To install all the Playwright dependencies, run <code>npx playwright install-deps</code>.</p>
<p>You can learn more about Playwright and Continuous Integration from these resources:</p>
<ul>
<li><a href="https://playwright.dev/docs/intro">Getting started with Playwright</a></li>
<li><a href="https://playwright.dev/docs/test-advanced#launching-a-development-web-server-during-the-tests">Use a development server</a></li>
<li><a href="https://playwright.dev/docs/ci">Playwright on your CI provider</a></li>
<li><a href="https://playwright.dev/docs/test-advanced#launching-a-development-web-server-during-the-tests">Use a development server</a></li>
</ul>
<h2 id="jest-and-react-testing-library">Jest and React Testing Library</h2>
<p>Jest and React Testing Library are frequently used together for <strong>Unit Testing</strong>.</p>
<h3 id="quickstart-2">Quickstart</h3>
<p>You can use <code>create-next-app</code> with the <a href="https://github.com/vercel/next.js/tree/canary/examples/with-jest">with-jest example</a> to quickly get started with Jest and React Testing Library:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1"><span class="ex">npx</span> create-next-app@latest --example with-jest with-jest-app</a></code></pre></div>
<h3 id="manual-setup-2">Manual setup</h3>
<p>To manually set up Jest and React Testing Library, install <code>jest</code> , <code>@testing-library/react</code>, <code>@testing-library/jest-dom</code> as well as some supporting packages:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1"><span class="ex">npm</span> install --save-dev jest babel-jest @testing-library/react @testing-library/jest-dom identity-obj-proxy react-test-renderer</a></code></pre></div>
<p><strong>Configuring Jest</strong></p>
<p>Create a <code>jest.config.js</code> file in your project’s root directory and add the following configuration options:</p>
<pre class="jsx"><code>// jest.config.js

module.exports = {
  collectCoverageFrom: [
    &#39;**/*.{js,jsx,ts,tsx}&#39;,
    &#39;!**/*.d.ts&#39;,
    &#39;!**/node_modules/**&#39;,
  ],
  moduleNameMapper: {
    /* Handle CSS imports (with CSS modules)
    https://jestjs.io/docs/webpack#mocking-css-modules */
    &#39;^.+\\.module\\.(css|sass|scss)$&#39;: &#39;identity-obj-proxy&#39;,

    // Handle CSS imports (without CSS modules)
    &#39;^.+\\.(css|sass|scss)$&#39;: &#39;&lt;rootDir&gt;/__mocks__/styleMock.js&#39;,

    /* Handle image imports
    https://jestjs.io/docs/webpack#handling-static-assets */
    &#39;^.+\\.(jpg|jpeg|png|gif|webp|avif|svg)$&#39;:
      &#39;&lt;rootDir&gt;/__mocks__/fileMock.js&#39;,
  },
  testPathIgnorePatterns: [&#39;&lt;rootDir&gt;/node_modules/&#39;, &#39;&lt;rootDir&gt;/.next/&#39;],
  testEnvironment: &#39;jsdom&#39;,
  transform: {
    /* Use babel-jest to transpile tests with the next/babel preset
    https://jestjs.io/docs/configuration#transform-objectstring-pathtotransformer--pathtotransformer-object */
    &#39;^.+\\.(js|jsx|ts|tsx)$&#39;: [&#39;babel-jest&#39;, { presets: [&#39;next/babel&#39;] }],
  },
  transformIgnorePatterns: [
    &#39;/node_modules/&#39;,
    &#39;^.+\\.module\\.(css|sass|scss)$&#39;,
  ],
}</code></pre>
<p>You can learn more about each option above in the <a href="https://jestjs.io/docs/configuration">Jest docs</a>.</p>
<p><strong>Handling stylesheets and image imports</strong></p>
<p>These files aren’t useful in tests but importing them may cause errors, so we will need to mock them. Create the mock files we referenced in the configuration above - <code>fileMock.js</code> and <code>styleMock.js</code> - inside a <code>__mocks__</code> directory:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb18-1" title="1"><span class="er">//</span> <span class="er">__mocks__/fileMock.js</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="er">(module.exports</span> <span class="er">=</span> <span class="er">&quot;test-file-stub&quot;)</span></a></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb19-1" title="1"><span class="er">//</span> <span class="er">__mocks__/styleMock.js</span></a>
<a class="sourceLine" id="cb19-2" title="2"></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="er">module.exports</span> <span class="er">=</span> <span class="fu">{}</span><span class="er">;</span></a></code></pre></div>
<p>For more information on handling static assets, please refer to the <a href="https://jestjs.io/docs/webpack#handling-static-assets">Jest Docs</a>.</p>
<p><strong>Extend Jest with custom matchers</strong></p>
<p><code>@testing-library/jest-dom</code> includes a set of convenient <a href="https://github.com/testing-library/jest-dom#custom-matchers">custom matchers</a> such as <code>.toBeInTheDocument()</code> making it easier to write tests. You can import the custom matchers for every test by adding the following option to the Jest configuration file:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb20-1" title="1"><span class="er">//</span> <span class="er">jest.config.js</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="er">setupFilesAfterEnv:</span> <span class="ot">[</span><span class="er">&#39;&lt;rootDir&gt;/jest.setup.js&#39;</span><span class="ot">]</span></a></code></pre></div>
<p>Then, inside <code>jest.setup.js</code>, add the following import:</p>
<pre class="jsx"><code>// jest.setup.js

import &#39;@testing-library/jest-dom/extend-expect&#39;</code></pre>
<p>If you need to add more setup options before each test, it’s common to add them to the <code>jest.setup.js</code> file above.</p>
<p><strong>Absolute Imports and Module Path Aliases</strong></p>
<p>If your project is using <a href="https://nextjs.org/docs/advanced-features/module-path-aliases">Module Path Aliases</a>, you will need to configure Jest to resolve the imports by matching the paths option in the <code>jsconfig.json</code> file with the <code>moduleNameMapper</code> option in the <code>jest.config.js</code> file. For example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb22-1" title="1"><span class="er">//</span> <span class="er">tsconfig.json</span> <span class="er">or</span> <span class="er">jsconfig.json</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="fu">{</span></a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="dt">&quot;compilerOptions&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb22-4" title="4">    <span class="dt">&quot;baseUrl&quot;</span><span class="fu">:</span> <span class="st">&quot;.&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb22-5" title="5">    <span class="dt">&quot;paths&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb22-6" title="6">      <span class="dt">&quot;@/components/*&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;components/*&quot;</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb22-7" title="7">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb22-8" title="8">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="fu">}</span></a></code></pre></div>
<pre class="jsx"><code>// jest.config.js
moduleNameMapper: {
  &#39;^@/components/(.*)$&#39;: &#39;&lt;rootDir&gt;/components/$1&#39;,
}</code></pre>
<p><strong>Add a test script to package.json</strong></p>
<p>Add the Jest executable in watch mode to the <code>package.json</code> scripts:</p>
<pre class="jsx"><code>&quot;scripts&quot;: {
  &quot;dev&quot;: &quot;next dev&quot;,
  &quot;build&quot;: &quot;next build&quot;,
  &quot;start&quot;: &quot;next start&quot;,
  &quot;test&quot;: &quot;jest --watch&quot;
}</code></pre>
<p><code>jest --watch</code> will re-run tests when a file is changed. For more Jest CLI options, please refer to the <a href="https://jestjs.io/docs/cli#reference">Jest Docs</a>.</p>
<p><strong>Create your first tests</strong></p>
<p>Your project is now ready to run tests. Follow Jests convention by adding tests to the <code>__tests__</code> folder in your project’s root directory.</p>
<p>For example, we can add a test to check if the <code>&lt;Index /&gt;</code> component successfully renders a heading:</p>
<pre class="jsx"><code>// __tests__/index.test.jsx

/**
 * @jest-environment jsdom
 */

import React from &#39;react&#39;
import { render, screen } from &#39;@testing-library/react&#39;
import Home from &#39;../pages/index&#39;

describe(&#39;Home&#39;, () =&gt; {
  it(&#39;renders a heading&#39;, () =&gt; {
    render(&lt;Home /&gt;)

    const heading = screen.getByRole(&#39;heading&#39;, {
      name: /welcome to next\.js!/i,
    })

    expect(heading).toBeInTheDocument()
  })
})</code></pre>
<blockquote>
<p><strong>Note</strong>: The <code>@jest-environment jsdom</code> comment above configures the testing environment as <code>jsdom</code> inside the test file because React Testing Library uses DOM elements like <code>document.body</code> which will not work in Jest’s default <code>node</code> testing environment. Alternatively, you can also set the <code>jsdom</code> environment globally by adding the Jest configuration option: <code>"testEnvironment": "jsdom"</code> in <code>jest.config.js</code>.</p>
</blockquote>
<p>Optionally, add a <a href="https://jestjs.io/docs/snapshot-testing">snapshot test</a> to keep track of any unexpected changes to your <code>&lt;Index /&gt;</code> component:</p>
<pre class="jsx"><code>// __tests__/snapshot.js
import React from &#39;react&#39;
import renderer from &#39;react-test-renderer&#39;
import Index from &#39;../pages/index&#39;

it(&#39;renders homepage unchanged&#39;, () =&gt; {
  const tree = renderer.create(&lt;Index /&gt;).toJSON()
  expect(tree).toMatchSnapshot()
})</code></pre>
<blockquote>
<p><strong>Note</strong>: Test files should not be included inside the pages directory because any files inside the pages directory are considered routes.</p>
</blockquote>
<p><strong>Running your test suite</strong></p>
<p>Run <code>npm run test</code> to run your test suite. After your tests pass or fail, you will notice a list of interactive Jest commands that will be helpful as you add more tests.</p>
<p>For further reading, you may find these resources helpful:</p>
<ul>
<li><a href="https://jestjs.io/docs/getting-started">Jest Docs</a></li>
<li><a href="https://testing-library.com/docs/react-testing-library/intro/">React Testing Library Docs</a></li>
<li><a href="https://testing-playground.com/">Testing Playground</a> - use good testing practices to match elements.</li>
</ul>
<h2 id="community-packages-and-examples">Community Packages and Examples</h2>
<p>The Next.js community has created packages and articles you may find helpful:</p>
<ul>
<li><a href="https://github.com/toomuchdesign/next-page-tester">next-page-tester</a> for DOM Integration Testing.</li>
<li><a href="https://github.com/scottrippey/next-router-mock">next-router-mock</a> for Storybook.</li>
<li><a href="https://glebbahmutov.com/blog/develop-preview-test/">Test Preview Vercel Deploys with Cypress</a> by Gleb Bahmutov.</li>
</ul>
<p>For more information on what to read next, we recommend:</p>
<div class="card">
<p><a href="/docs/basic-features/environment-variables#test-environment-variable.md"> <b>Test Environment Variables</b> <small>Learn more about the test environment variables.</small> </a></p>
</div>
</body>
</html>
