<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>image</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="nextimage">next/image</h1>
    <details>
      <summary><b>Examples</b></summary>
      <ul>
        <li>
          <a
            href="https://github.com/vercel/next.js/tree/canary/examples/image-component"
            >Image Component</a
          >
        </li>
      </ul>
    </details>
    <details>
      <p>
        <summary><b>Version History</b></summary>
      </p>
      <table>
        <colgroup>
          <col style="width: 8%" />
          <col style="width: 91%" />
        </colgroup>
        <thead>
          <tr class="header">
            <th>Version</th>
            <th>Changes</th>
          </tr>
        </thead>
        <tbody>
          <tr class="odd">
            <td><code>v12.0.0</code></td>
            <td>
              <code>formats</code> configuration added as well as AVIF support.
            </td>
          </tr>
          <tr class="even">
            <td><code>v11.1.0</code></td>
            <td>
              <code>onLoadingComplete</code> and <code>lazyBoundary</code> props
              added.
            </td>
          </tr>
          <tr class="odd">
            <td><code>v11.0.0</code></td>
            <td>
              <code>src</code> prop support for static import.<br /><code
                >placeholder</code
              >
              prop added.<br /><code>blurDataURL</code> prop added.
            </td>
          </tr>
          <tr class="even">
            <td><code>v10.0.5</code></td>
            <td><code>loader</code> prop added.</td>
          </tr>
          <tr class="odd">
            <td><code>v10.0.1</code></td>
            <td><code>layout</code> prop added.</td>
          </tr>
          <tr class="even">
            <td><code>v10.0.0</code></td>
            <td><code>next/image</code> introduced.</td>
          </tr>
        </tbody>
      </table>
    </details>
    <blockquote>
      <p>
        <strong
          >Note: This is API documentation for the Image Component and Image
          Optimization. For a feature overview and usage information for images
          in Next.js, please see
          <a href="/docs/basic-features/image-optimization.md">Images</a
          >.</strong
        >
      </p>
    </blockquote>
    <h2 id="required-props">Required Props</h2>
    <p>
      The <code>&lt;Image /&gt;</code> component requires the following
      properties.
    </p>
    <h3 id="src">src</h3>
    <p>Must be one of the following:</p>
    <ol type="1">
      <li>
        A
        <a href="/docs/basic-features/image-optimization.md#local-images"
          >statically imported</a
        >
        image file, or
      </li>
      <li>
        A path string. This can be either an absolute external URL, or an
        internal path depending on the <a href="#loader">loader</a>.
      </li>
    </ol>
    <p>
      When using an external URL, you must add it to
      <a href="#domains">domains</a> in <code>next.config.js</code>.
    </p>
    <h3 id="width">width</h3>
    <p>The width of the image, in pixels. Must be an integer without a unit.</p>
    <p>
      Required, except for statically imported images, or those with
      <a href="#layout"><code>layout="fill"</code></a
      >.
    </p>
    <h3 id="height">height</h3>
    <p>
      The height of the image, in pixels. Must be an integer without a unit.
    </p>
    <p>
      Required, except for statically imported images, or those with
      <a href="#layout"><code>layout="fill"</code></a
      >.
    </p>
    <h2 id="optional-props">Optional Props</h2>
    <p>
      The <code>&lt;Image /&gt;</code> component accepts a number of additional
      properties beyond those which are required. This section describes the
      most commonly-used properties of the Image component. Find details about
      more rarely-used properties in the
      <a href="#advanced-props">Advanced Props</a> section.
    </p>
    <h3 id="layout">layout</h3>
    <p>The layout behavior of the image as the viewport changes size.</p>
    <table style="width: 100%">
      <colgroup>
        <col style="width: 10%" />
        <col style="width: 29%" />
        <col style="width: 56%" />
        <col style="width: 3%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th><code>layout</code></th>
          <th>Behavior</th>
          <th><code>srcSet</code></th>
          <th><code>sizes</code></th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td><code>intrinsic</code> (default)</td>
          <td>
            Scale <em>down</em> to fit width of container, up to image size
          </td>
          <td>
            <code>1x</code>, <code>2x</code> (based on
            <a href="#image-sizes">imageSizes</a>)
          </td>
          <td>N/A</td>
        </tr>
        <tr class="even">
          <td><code>fixed</code></td>
          <td>Sized to <code>width</code> and <code>height</code> exactly</td>
          <td>
            <code>1x</code>, <code>2x</code> (based on
            <a href="#image-sizes">imageSizes</a>)
          </td>
          <td>N/A</td>
        </tr>
        <tr class="odd">
          <td><code>responsive</code></td>
          <td>Scale to fit width of container</td>
          <td>
            <code>640w</code>, <code>750w</code>, … <code>2048w</code>, <code
              >3840w</code
            >
            (based on <a href="#image-sizes">imageSizes</a> and
            <a href="#device-sizes">deviceSizes</a>)
          </td>
          <td><code>100vw</code></td>
        </tr>
        <tr class="even">
          <td><code>fill</code></td>
          <td>Grow in both X and Y axes to fill container</td>
          <td>
            <code>640w</code>, <code>750w</code>, … <code>2048w</code>, <code
              >3840w</code
            >
            (based on <a href="#image-sizes">imageSizes</a> and
            <a href="#device-sizes">deviceSizes</a>)
          </td>
          <td><code>100vw</code></td>
        </tr>
      </tbody>
    </table>
    <ul>
      <li>
        <a href="https://image-component.nextjs.gallery/layout-intrinsic"
          >Demo the <code>intrinsic</code> layout (default)</a
        >
        <ul>
          <li>
            When <code>intrinsic</code>, the image will scale the dimensions
            down for smaller viewports, but maintain the original dimensions for
            larger viewports.
          </li>
        </ul>
      </li>
      <li>
        <a href="https://image-component.nextjs.gallery/layout-fixed"
          >Demo the <code>fixed</code> layout</a
        >
        <ul>
          <li>
            When <code>fixed</code>, the image dimensions will not change as the
            viewport changes (no responsiveness) similar to the native
            <code>img</code> element.
          </li>
        </ul>
      </li>
      <li>
        <a href="https://image-component.nextjs.gallery/layout-responsive"
          >Demo the <code>responsive</code> layout</a
        >
        <ul>
          <li>
            When <code>responsive</code>, the image will scale the dimensions
            down for smaller viewports and scale up for larger viewports.
          </li>
          <li>
            Ensure the parent element uses <code>display: block</code> in their
            stylesheet.
          </li>
        </ul>
      </li>
      <li>
        <a href="https://image-component.nextjs.gallery/layout-fill"
          >Demo the <code>fill</code> layout</a
        >
        <ul>
          <li>
            When <code>fill</code>, the image will stretch both width and height
            to the dimensions of the parent element, provided the parent element
            is relative.
          </li>
          <li>
            This is usually paired with the
            <a href="#objectFit"><code>objectFit</code></a> property.
          </li>
          <li>
            Ensure the parent element has <code>position: relative</code> in
            their stylesheet.
          </li>
        </ul>
      </li>
      <li>
        <a href="https://image-component.nextjs.gallery/background"
          >Demo background image</a
        >
      </li>
    </ul>
    <h3 id="loader">loader</h3>
    <p>
      A custom function used to resolve URLs. Setting the loader as a prop on
      the Image component overrides the default loader defined in the
      <a href="#loader-configuration"
        ><code>images</code> section of <code>next.config.js</code></a
      >.
    </p>
    <p>
      A <code>loader</code> is a function returning a URL string for the image,
      given the following parameters:
    </p>
    <ul>
      <li>
        <a href="#src"><code>src</code></a>
      </li>
      <li>
        <a href="#width"><code>width</code></a>
      </li>
      <li>
        <a href="#quality"><code>quality</code></a>
      </li>
    </ul>
    <p>
      Here is an example of using a custom loader with <code>next/image</code>:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> Image <span class="im">from</span> <span class="st">&#39;next/image&#39;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">const</span> myLoader <span class="op">=</span> (<span class="op">{</span> src<span class="op">,</span> width<span class="op">,</span> quality <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="cf">return</span> <span class="vs">`https://example.com/</span><span class="sc">${</span>src<span class="sc">}</span><span class="vs">?w=</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">&amp;q=</span><span class="sc">${</span>quality <span class="op">||</span> <span class="dv">75</span><span class="sc">}</span><span class="vs">`</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">const</span> MyImage <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="op">&lt;</span>Image</a>
<a class="sourceLine" id="cb1-10" title="10">      loader<span class="op">={</span>myLoader<span class="op">}</span></a>
<a class="sourceLine" id="cb1-11" title="11">      src<span class="op">=</span><span class="st">&quot;me.png&quot;</span></a>
<a class="sourceLine" id="cb1-12" title="12">      alt<span class="op">=</span><span class="st">&quot;Picture of the author&quot;</span></a>
<a class="sourceLine" id="cb1-13" title="13">      width<span class="op">={</span><span class="dv">500</span><span class="op">}</span></a>
<a class="sourceLine" id="cb1-14" title="14">      height<span class="op">={</span><span class="dv">500</span><span class="op">}</span></a>
<a class="sourceLine" id="cb1-15" title="15">    /&gt;</a>
<a class="sourceLine" id="cb1-16" title="16">  )</a>
<a class="sourceLine" id="cb1-17" title="17"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="sizes">sizes</h3>
    <p>
      A string that provides information about how wide the image will be at
      different breakpoints. Defaults to <code>100vw</code> (the full width of
      the screen) when using <code>layout="responsive"</code> or
      <code>layout="fill"</code>.
    </p>
    <p>
      <code>sizes</code> is important for performance when using
      <code>layout="responsive"</code> or <code>layout="fill"</code> with images
      that take up less than the full viewport width.
    </p>
    <p>
      If you are using <code>layout="fill"</code> or
      <code>layout="responsive"</code> and the image will always be less than
      half the viewport width, include <code>sizes="50vw"</code>. Without
      <code>sizes</code>, the image will be sent at twice the necessary
      resolution, decreasing performance.
    </p>
    <p>
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-sizes"
        >Learn more</a
      >.
    </p>
    <h3 id="quality">quality</h3>
    <p>
      The quality of the optimized image, an integer between <code>1</code> and
      <code>100</code> where <code>100</code> is the best quality. Defaults to
      <code>75</code>.
    </p>
    <h3 id="priority">priority</h3>
    <p>
      When true, the image will be considered high priority and
      <a href="https://web.dev/preload-responsive-images/">preload</a>. Lazy
      loading is automatically disabled for images using <code>priority</code>.
    </p>
    <p>
      You should use the <code>priority</code> attribute on any image which you
      suspect will be the
      <a href="https://nextjs.org/learn/seo/web-performance/lcp"
        >Largest Contentful Paint (LCP) element</a
      >. It may be appropriate to have multiple priority images, as different
      images may be the LCP element for different viewport sizes.
    </p>
    <p>
      Should only be used when the image is visible above the fold. Defaults to
      <code>false</code>.
    </p>
    <h3 id="placeholder">placeholder</h3>
    <p>
      A placeholder to use while the image is loading. Possible values are
      <code>blur</code> or <code>empty</code>. Defaults to <code>empty</code>.
    </p>
    <p>
      When <code>blur</code>, the
      <a href="#blurdataurl"><code>blurDataURL</code></a> property will be used
      as the placeholder. If <code>src</code> is an object from a
      <a href="#local-images">static import</a> and the imported image is
      <code>.jpg</code>, <code>.png</code>, <code>.webp</code>, or
      <code>.avif</code>, then <code>blurDataURL</code> will be automatically
      populated.
    </p>
    <p>
      For dynamic images, you must provide the
      <a href="#blurdataurl"><code>blurDataURL</code></a> property. Solutions
      such as
      <a href="https://github.com/joe-bell/plaiceholder">Plaiceholder</a> can
      help with <code>base64</code> generation.
    </p>
    <p>
      When <code>empty</code>, there will be no placeholder while the image is
      loading, only empty space.
    </p>
    <p>Try it out:</p>
    <ul>
      <li>
        <a href="https://image-component.nextjs.gallery/placeholder"
          >Demo the <code>blur</code> placeholder</a
        >
      </li>
      <li>
        <a href="https://image-component.nextjs.gallery/shimmer"
          >Demo the shimmer effect with <code>blurDataURL</code> prop</a
        >
      </li>
    </ul>
    <h2 id="advanced-props">Advanced Props</h2>
    <p>
      In some cases, you may need more advanced usage. The
      <code>&lt;Image /&gt;</code> component optionally accepts the following
      advanced properties.
    </p>
    <h3 id="objectfit">objectFit</h3>
    <p>
      Defines how the image will fit into its parent container when using
      <code>layout="fill"</code>.
    </p>
    <p>
      This value is passed to the
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit"
        >object-fit CSS property</a
      >
      for the <code>src</code> image.
    </p>
    <h3 id="objectposition">objectPosition</h3>
    <p>
      Defines how the image is positioned within its parent element when using
      <code>layout="fill"</code>.
    </p>
    <p>
      This value is passed to the
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/object-position"
        >object-position CSS property</a
      >
      applied to the image.
    </p>
    <h3 id="onloadingcomplete">onLoadingComplete</h3>
    <p>
      A callback function that is invoked once the image is completely loaded
      and the <a href="#placeholder">placeholder</a> has been removed.
    </p>
    <p>
      The <code>onLoadingComplete</code> function accepts one parameter, an
      object with the following properties:
    </p>
    <ul>
      <li>
        <a
          href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/naturalWidth"
          ><code>naturalWidth</code></a
        >
      </li>
      <li>
        <a
          href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/naturalHeight"
          ><code>naturalHeight</code></a
        >
      </li>
    </ul>
    <h3 id="loading">loading</h3>
    <blockquote>
      <p>
        <strong>Attention</strong>: This property is only meant for advanced
        usage. Switching an image to load with <code>eager</code> will normally
        <strong>hurt performance</strong>.
      </p>
      <p>
        We recommend using the
        <a href="#priority"><code>priority</code></a> property instead, which
        properly loads the image eagerly for nearly all use cases.
      </p>
    </blockquote>
    <p>The loading behavior of the image. Defaults to <code>lazy</code>.</p>
    <p>
      When <code>lazy</code>, defer loading the image until it reaches a
      calculated distance from the viewport.
    </p>
    <p>When <code>eager</code>, load the image immediately.</p>
    <p>
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-loading"
        >Learn more</a
      >
    </p>
    <h3 id="blurdataurl">blurDataURL</h3>
    <p>
      A
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs"
        >Data URL</a
      >
      to be used as a placeholder image before the <code>src</code> image
      successfully loads. Only takes effect when combined with
      <a href="#placeholder"><code>placeholder="blur"</code></a
      >.
    </p>
    <p>
      Must be a base64-encoded image. It will be enlarged and blurred, so a very
      small image (10px or less) is recommended. Including larger images as
      placeholders may harm your application performance.
    </p>
    <p>Try it out:</p>
    <ul>
      <li>
        <a href="https://image-component.nextjs.gallery/placeholder"
          >Demo the default <code>blurDataURL</code> prop</a
        >
      </li>
      <li>
        <a href="https://image-component.nextjs.gallery/shimmer"
          >Demo the shimmer effect with <code>blurDataURL</code> prop</a
        >
      </li>
    </ul>
    <p>
      You can also
      <a href="https://png-pixel.com">generate a solid color Data URL</a> to
      match the image.
    </p>
    <h3 id="lazyboundary">lazyBoundary</h3>
    <p>
      A string (with similar syntax to the margin property) that acts as the
      bounding box used to detect the intersection of the viewport with the
      image and trigger lazy <a href="#loading">loading</a>. Defaults to
      <code>"200px"</code>.
    </p>
    <p>
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin"
        >Learn more</a
      >
    </p>
    <h3 id="unoptimized">unoptimized</h3>
    <p>
      When true, the source image will be served as-is instead of changing
      quality, size, or format. Defaults to <code>false</code>.
    </p>
    <h2 id="other-props">Other Props</h2>
    <p>
      Other properties on the <code>&lt;Image /&gt;</code> component will be
      passed to the underlying <code>img</code> element with the exception of
      the following:
    </p>
    <ul>
      <li><code>style</code>. Use <code>className</code> instead.</li>
      <li>
        <code>srcSet</code>. Use
        <a href="#device-sizes">Device Sizes</a> instead.
      </li>
      <li>
        <code>ref</code>. Use
        <a href="#onloadingcomplete"><code>onLoadingComplete</code></a> instead.
      </li>
      <li><code>decoding</code>. It is always <code>"async"</code>.</li>
    </ul>
    <h2 id="configuration-options">Configuration Options</h2>
    <h3 id="domains">Domains</h3>
    <p>
      To protect your application from malicious users, you must define a list
      of image provider domains that you want to be served from the Next.js
      Image Optimization API. This is configured in with the
      <code>domains</code> property in your <code>next.config.js</code> file, as
      shown below:
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="dt">domains</span><span class="op">:</span> [<span class="st">&#39;assets.acme.com&#39;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="loader-configuration">Loader Configuration</h3>
    <p>
      If you want to use a cloud provider to optimize images instead of using
      the Next.js built-in Image Optimization API, you can configure the
      <code>loader</code> and <code>path</code> prefix in your
      <code>next.config.js</code> file. This allows you to use relative URLs for
      the Image <code>src</code> and automatically generate the correct absolute
      URL for your provider.
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="dt">loader</span><span class="op">:</span> <span class="st">&#39;imgix&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;https://example.com/myaccount/&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">},</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="built-in-loaders">Built-in Loaders</h3>
    <p>The following Image Optimization cloud providers are included:</p>
    <ul>
      <li>
        Default: Works automatically with <code>next dev</code>,
        <code>next start</code>, or a custom server
      </li>
      <li>
        <a href="https://vercel.com">Vercel</a>: Works automatically when you
        deploy on Vercel, no configuration necessary.
        <a href="https://vercel.com/docs/next.js/image-optimization"
          >Learn more</a
        >
      </li>
      <li>
        <a href="https://www.imgix.com">Imgix</a>: <code>loader: 'imgix'</code>
      </li>
      <li>
        <a href="https://cloudinary.com">Cloudinary</a>:
        <code>loader: 'cloudinary'</code>
      </li>
      <li>
        <a href="https://www.akamai.com">Akamai</a>:
        <code>loader: 'akamai'</code>
      </li>
      <li>
        Custom: <code>loader: 'custom'</code> use a custom cloud provider by
        implementing the
        <a href="/docs/api-reference/next/image.md#loader"
          ><code>loader</code></a
        >
        prop on the <code>next/image</code> component
      </li>
    </ul>
    <p>
      If you need a different provider, you can use the
      <a href="#loader"><code>loader</code></a> prop with
      <code>next/image</code>.
    </p>
    <blockquote>
      <p>
        The <code>next/image</code> component’s default loader is not supported
        when using
        <a href="/docs/advanced-features/static-html-export.md"
          ><code>next export</code></a
        >. However, other loader options will work.
      </p>
    </blockquote>
    <blockquote>
      <p>
        The <code>next/image</code> component’s default loader uses
        <a href="https://www.npmjs.com/package/@squoosh/lib"
          ><code>squoosh</code></a
        >
        because it is quick to install and suitable for a development
        environment. When using <code>next start</code> in your production
        environment, it is strongly recommended that you install
        <a href="https://www.npmjs.com/package/sharp"><code>sharp</code></a> by
        running <code>yarn add sharp</code> in your project directory. This is
        not necessary for Vercel deployments, as <code>sharp</code> is installed
        automatically.
      </p>
    </blockquote>
    <h2 id="advanced">Advanced</h2>
    <p>
      The following configuration is for advanced use cases and is usually not
      necessary. If you choose to configure the properties below, you will
      override any changes to the Next.js defaults in future updates.
    </p>
    <h3 id="device-sizes">Device Sizes</h3>
    <p>
      If you know the expected device widths of your users, you can specify a
      list of device width breakpoints using the
      <code>deviceSizes</code> property in <code>next.config.js</code>. These
      widths are used when the
      <a href="/docs/api-reference/next/image.md"><code>next/image</code></a>
      component uses <code>layout="responsive"</code> or
      <code>layout="fill"</code> to ensure the correct image is served for
      user’s device.
    </p>
    <p>If no configuration is provided, the default below is used.</p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="dt">deviceSizes</span><span class="op">:</span> [<span class="dv">640</span><span class="op">,</span> <span class="dv">750</span><span class="op">,</span> <span class="dv">828</span><span class="op">,</span> <span class="dv">1080</span><span class="op">,</span> <span class="dv">1200</span><span class="op">,</span> <span class="dv">1920</span><span class="op">,</span> <span class="dv">2048</span><span class="op">,</span> <span class="dv">3840</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="image-sizes">Image Sizes</h3>
    <p>
      You can specify a list of image widths using the
      <code>images.imageSizes</code> property in your
      <code>next.config.js</code> file. These widths are concatenated with the
      array of <a href="#device-sizes">device sizes</a> to form the full array
      of sizes used to generate image
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/srcset"
        >srcset</a
      >s.
    </p>
    <p>
      The reason there are two seperate lists is that imageSizes is only used
      for images which provide a <a href="#sizes"><code>sizes</code></a> prop,
      which indicates that the image is less than the full width of the screen.
      <strong
        >Therefore, the sizes in imageSizes should all be smaller than the
        smallest size in deviceSizes.</strong
      >
    </p>
    <p>If no configuration is provided, the default below is used.</p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="dt">imageSizes</span><span class="op">:</span> [<span class="dv">16</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">48</span><span class="op">,</span> <span class="dv">64</span><span class="op">,</span> <span class="dv">96</span><span class="op">,</span> <span class="dv">128</span><span class="op">,</span> <span class="dv">256</span><span class="op">,</span> <span class="dv">384</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="op">}</span></a></code></pre>
    </div>
    <h2 id="caching-behavior">Caching Behavior</h2>
    <p>
      The following describes the caching algorithm for the default
      <a href="#loader">loader</a>. For all other loaders, please refer to your
      cloud provider’s documentation.
    </p>
    <p>
      Images are optimized dynamically upon request and stored in the
      <code>&lt;distDir&gt;/cache/images</code> directory. The optimized image
      file will be served for subsequent requests until the expiration is
      reached. When a request is made that matches a cached but expired file,
      the cached file is deleted before generating a new optimized image and
      caching the new file.
    </p>
    <p>
      The expiration (or rather Max Age) is defined by the upstream server’s
      <code>Cache-Control</code> header.
    </p>
    <ul>
      <li>
        If <code>s-maxage</code> is found in <code>Cache-Control</code>, it is
        used. If no <code>s-maxage</code> is found, then <code>max-age</code> is
        used. If no <code>max-age</code> is found, then
        <a href="#minimum-cache-ttl"><code>minimumCacheTTL</code></a> is used.
      </li>
      <li>
        You can configure
        <a href="#minimum-cache-ttl"><code>minimumCacheTTL</code></a> to
        increase the cache duration when the upstream image does not include
        <code>max-age</code>.
      </li>
      <li>
        You can also configure
        <a href="#device-sizes"><code>deviceSizes</code></a> and
        <a href="#device-sizes"><code>imageSizes</code></a> to reduce the total
        number of possible generated images.
      </li>
      <li>
        You can also configure
        <a href="/docs/basic-features/image-optimization.md#acceptable-formats"
          >formats</a
        >
        to disable multiple formats in favor of a single image format.
      </li>
    </ul>
    <p>
      You can configure the Time to Live (TTL) in seconds for cached optimized
      images. In many cases, it’s better to use a
      <a href="/docs/basic-features/image-optimization.md#local-images"
        >Static Image Import</a
      >
      which will automatically hash the file contents and cache the image
      forever with a <code>Cache-Control</code> header of
      <code>immutable</code>.
    </p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="dt">minimumCacheTTL</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="op">}</span></a></code></pre>
    </div>
    <p>
      If you need to add a <code>Cache-Control</code> header for the browser
      (not recommended), you can configure
      <a href="/docs/api-reference/next.config.js/headers"
        ><code>headers</code></a
      >
      on the upstream image e.g. <code>/some-asset.jpg</code> not
      <code>/_next/image</code> itself.
    </p>
    <h3 id="disable-static-imports">Disable Static Imports</h3>
    <p>
      The default behavior allows you to import static files such as
      <code>import icon from './icon.png</code> and then pass that to the
      <code>src</code> property.
    </p>
    <p>
      In some cases, you may wish to disable this feature if it conflicts with
      other plugins that expect the import to behave differently.
    </p>
    <p>
      You can disable static image imports inside your
      <code>next.config.js</code>:
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="dt">disableStaticImages</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="acceptable-formats">Acceptable Formats</h3>
    <p>
      The default
      <a href="#loader-configuration">Image Optimization API</a> will
      automatically detect the browser’s supported image formats via the
      request’s <code>Accept</code> header.
    </p>
    <p>
      If the <code>Accept</code> matches more than one of the configured
      formats, the first match in the array is used. Therefore, the array order
      matters. If there is no match, the Image Optimization API will fallback to
      the original image’s format.
    </p>
    <p>If no configuration is provided, the default below is used.</p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">images</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="dt">formats</span><span class="op">:</span> [<span class="st">&#39;image/avif&#39;</span><span class="op">,</span> <span class="st">&#39;image/webp&#39;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="op">}</span></a></code></pre>
    </div>
    <h2 id="related">Related</h2>
    <p>
      For an overview of the Image component features and usage guidelines, see:
    </p>
    <div class="card">
      <p>
        <a href="/docs/basic-features/image-optimization.md">
          <b>Images</b>
          <small
            >Learn how to display and optimize images with the Image
            component.</small
          >
        </a>
      </p>
    </div>
  </body>
</html>
