<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>layouts</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="layouts">Layouts</h1>
<details open>
<summary><b>Examples</b></summary>
<ul>
<li>
<a href="https://github.com/vercel/next.js/tree/canary/examples/layout-component">layout-component</a>
</li>
</ul>
</details>
<p>The React model allows us to deconstruct a <a href="/docs/basic-features/pages.md">page</a> into a series of components. Many of these components are often reused between pages. For example, you might have the same navigation bar and footer on every page.</p>
<pre class="jsx"><code>// components/layout.js

import Navbar from &#39;./navbar&#39;
import Footer from &#39;./footer&#39;

export default function Layout({ children }) {
  return (
    &lt;&gt;
      &lt;Navbar /&gt;
      &lt;main&gt;{children}&lt;/main&gt;
      &lt;Footer /&gt;
    &lt;/&gt;
  )
}</code></pre>
<h2 id="examples">Examples</h2>
<h3 id="single-shared-layout-with-custom-app">Single Shared Layout with Custom App</h3>
<p>If you only have one layout for your entire application, you can create a <a href="/docs/advanced-features/custom-app.md">Custom App</a> and wrap your application with the layout. Since the <code>&lt;Layout /&gt;</code> component is re-used when changing pages, its component state will be preserved (e.g. input values).</p>
<pre class="jsx"><code>// pages/_app.js

import Layout from &#39;../components/layout&#39;

export default function MyApp({ Component, pageProps }) {
  return (
    &lt;Layout&gt;
      &lt;Component {...pageProps} /&gt;
    &lt;/Layout&gt;
  )
}</code></pre>
<h3 id="per-page-layouts">Per-Page Layouts</h3>
<p>If you need multiple layouts, you can add a property <code>getLayout</code> to your page, allowing you to return a React component for the layout. This allows you to define the layout on a <em>per-page basis</em>. Since we’re returning a function, we can have complex nested layouts if desired.</p>
<pre class="jsx"><code>// pages/index.js

import Layout from &#39;../components/layout&#39;
import NestedLayout from &#39;../components/nested-layout&#39;

export default function Page() {
  return {
    /** Your content */
  }
}

Page.getLayout = function getLayout(page) {
  return (
    &lt;Layout&gt;
      &lt;NestedLayout&gt;{page}&lt;/NestedLayout&gt;
    &lt;/Layout&gt;
  )
}</code></pre>
<pre class="jsx"><code>// pages/_app.js

export default function MyApp({ Component, pageProps }) {
  // Use the layout defined at the page level, if available
  const getLayout = Component.getLayout || ((page) =&gt; page)

  return getLayout(&lt;Component {...pageProps} /&gt;)
}</code></pre>
<p>When navigating between pages, we want to <em>persist</em> page state (input values, scroll position, etc) for a Single-Page Application (SPA) experience.</p>
<p>This layout pattern enables state persistence because the React component tree is maintained between page transitions. With the component tree, React can understand which elements have changed to preserve state.</p>
<blockquote>
<p><strong>Note</strong>: This process is called <a href="https://reactjs.org/docs/reconciliation.html">reconciliation</a>, which is how React understands which elements have changed.</p>
</blockquote>
<h3 id="with-typescript">With TypeScript</h3>
<p>When using TypeScript, you must first create a new type for your pages which includes a <code>getLayout</code> function. Then, you must create a new type for your <code>AppProps</code> which overrides the <code>Component</code> property to use the previously created type.</p>
<pre class="tsx"><code>// pages/index.tsx

import type { ReactElement } from &#39;react&#39;
import Layout from &#39;../components/layout&#39;
import NestedLayout from &#39;../components/nested-layout&#39;

export default function Page() {
  return {
    /** Your content */
  }
}

Page.getLayout = function getLayout(page: ReactElement) {
  return (
    &lt;Layout&gt;
      &lt;NestedLayout&gt;{page}&lt;/NestedLayout&gt;
    &lt;/Layout&gt;
  )
}</code></pre>
<pre class="tsx"><code>// pages/_app.tsx

import type { ReactElement, ReactNode } from &#39;react&#39;
import type { NextPage } from &#39;next&#39;
import type { AppProps } from &#39;next/app&#39;

type NextPageWithLayout = NextPage &amp; {
  getLayout?: (page: ReactElement) =&gt; ReactNode
}

type AppPropsWithLayout = AppProps &amp; {
  Component: NextPageWithLayout
}

export default function MyApp({ Component, pageProps }: AppPropsWithLayout) {
  // Use the layout defined at the page level, if available
  const getLayout = Component.getLayout ?? ((page) =&gt; page)

  return getLayout(&lt;Component {...pageProps} /&gt;)
}</code></pre>
<h3 id="data-fetching">Data Fetching</h3>
<p>Inside your layout, you can fetch data on the client-side using <code>useEffect</code> or a library like <a href="https://swr.vercel.app/">SWR</a>. Because this file is not a <a href="/docs/basic-features/pages.md">Page</a>, you cannot use <code>getStaticProps</code> or <code>getServerSideProps</code> currently.</p>
<pre class="jsx"><code>// components/layout.js

import useSWR from &#39;swr&#39;
import Navbar from &#39;./navbar&#39;
import Footer from &#39;./footer&#39;

export default function Layout({ children }) {
  const { data, error } = useSWR(&#39;/api/navigation&#39;, fetcher)

  if (error) return &lt;div&gt;Failed to load&lt;/div&gt;
  if (!data) return &lt;div&gt;Loading...&lt;/div&gt;

  return (
    &lt;&gt;
      &lt;Navbar links={data.links} /&gt;
      &lt;main&gt;{children}&lt;/main&gt;
      &lt;Footer /&gt;
    &lt;/&gt;
  )
}</code></pre>
<p>For more information on what to do next, we recommend the following sections:</p>
<div class="card">
<p><a href="/docs/basic-features/pages.md"> <b>Pages:</b> <small>Learn more about what pages are in Next.js.</small> </a></p>
</div>
<div class="card">
<p><a href="/docs/advanced-features/custom-app.md"> <b>Custom App:</b> <small>Learn more about how Next.js initialize pages.</small> </a></p>
</div>
</body>
</html>
